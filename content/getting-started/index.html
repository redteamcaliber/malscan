---
layout: page
permalink: /getting-started/
---
<!DOCTYPE html>

<div>

<h1 style="font-size: 40px">Getting Started With Malscan</h1>

<hr class="block-divider">

<div>

	<h2 id="#system-requirements">System Requirements</h2>

	<div>

		<div>

			The base malscan application has few dependencies, however certain additional functionality and modules of malscan have different dependencies. Basic package requirements for malscan are:

        </div>

        <div style="margin-top: 5px">

            <ul>
                <li>Clam Antivirus 0.98 or later</li>
                <li>the file package</li>
                <li>the wget package</li>
                <li>the bash package</li>
            </ul>

		</div>

        <div>
            
            Additional dependencies for certain malscan modules include: 

        </div>

		<div style="margin-top: 5px">

			<ul>
				<li>Email notifications - sendmail</li>
			</ul>

		</div>

		<div>
			
			In addition to these packages, Malscan requires root SSH or terminal access to the machine that will be running Malscan.

		</div>

	</div>

</div>

<hr class="block-divider">

<div>

	<h2>Installation</h2>

	<div style="margin-bottom: 10px">
		
		Automated installation options are available for Red Hat Enterprise Linux and its derivatves as well as Debian and its derivatives. 

	</div>

	<div>
		
        <h4>Red Hat Enterprise Linux / CentOS</h4>

        <div style="margin-bottom: 10px">
            
            Yum repositories are available for the two latest RedHat Enerprise Linux and CentOS releases, currently: RHEL/CentOS 6, and RHEL/CentOS 7. To install malscan, run the command below:

            <div class="code-block">
                
            <span class="bash-root-prompt">[<span style="color: #ac2925">root</span>@<span style="color: #70DBDB">example</span>:<span style="color: #ac2925">~]#</span></span> rpm -Uvh https://www.malscan.org/malscan-release-el.rpm

            </div>

            malscan is now installed! Please see the <a href="#basic-usage">Basic Usage</a> section below to get started using malscan.

        </div>

        <h4>Fedora 22 / 23 /24</h4>

        <div style="margin-bottom: 10px">
            
            Yum repositories are available for the three latest Fedora releases, currently: Fedora 22, Fedora 23, and Fedora 24. To install malscan, run the command below:

            <div class="code-block">
                
            <span class="bash-root-prompt">[<span style="color: #ac2925">root</span>@<span style="color: #70DBDB">example</span>:<span style="color: #ac2925">~]#</span></span> rpm -Uvh https://www.malscan.org/malscan-release-fedora.rpm

            </div>

            malscan is now installed! Please see the <a href="#basic-usage">Basic Usage</a> section below to get started using malscan.

        </div>

	</div>

    <div>
        
        <h4>Automated Installation - RHEL, CentOS, Fedora, Debian, Ubuntu</h4>

        <div style="margin-bottom: 10px">
            
            If you cannot, or are not interested in, using the provided repositories for your distribution to install malscan, you can use the automated malscan installation script. To install malscan on most RHEL, CentOS, Fedora, Debian, and Ubuntu systems run the following command as root:

            <div class="code-block">
                
            <span class="bash-root-prompt">[<span style="color: #ac2925">root</span>@<span style="color: #70DBDB">example</span>:<span style="color: #ac2925">~]#</span></span> wget https://raw.githubusercontent.com/jgrancell/malscan/master/install.sh && bash install

            </div>

            malscan is now installed! Please see the <a href="#basic-usage">Basic Usage</a> section below to get started using malscan.

        </div>

    </div>

    <div>
        
        <h4>Manual Installation - Any Linux OS</h4>

        <div style="margin-bottom: 10px">
            
            Malscan can be manually installed on any operating system that successfully meets the <a href="#system-requirements">System Requirements</a> listed above. This can be done by following the steps outlined below.

            <div style="margin-top: 5px">

                <ol>
                    <li>Install all software dependencies with your OS's package manager (or from source): 
                        <li><span class="file-block">clamav</span></li>
                        <li><span class="file-block">clamav-update</span> (your package manager may name it clamav-update or clamav-db)</li>
                        <li><span class="file-block">bash</span></li>
                        <li><span class="file-block">file</span></li>
                        <li><span class="file-block">wget</span></li>
                        <li><span class="file-block">sendmail</span></li>
                    </li>
                    <li>Create the required malscan directories.</li>
                    <li style="list-style-type: none">
                        <ul>
                            <li><span class="file-block">mkdir /usr/local/share/malscan</span></li>
                            <li><span class="file-block">mkdir /etc/malscan</span></li>
                            <li><span class="file-block">mkdir /var/lib/malscan</span></li>
                            <li><span class="file-block">mkdir /var/log/malscan</span></li>
                            <li><span class="file-block">mkdir /root/.malscan/quarantine</span></li>
                        </ul>
                    </li>
                    <li>Place the following files in the listed locations:
                        <li>
                            <span class="file-block">wget -P "/etc/malscan/" "https://raw.githubusercontent.com/jgrancell/malscan/master/malscan.conf"</span>
                        </li>
                        <li>
                            <span class="file-block">wget -P "/etc/malscan/" "https://raw.githubusercontent.com/jgrancell/malscan/master/freshclam.conf"</span>
                        </li>
                        <li>
                            <span class="file-block">wget -P "/usr/local/share/man/man1/" "https://raw.githubusercontent.com/jgrancell/malscan/master/malscan.1"</span>
                        </li>
                        <li>
                            <span class="file-block">wget -P "/usr/local/bin/" "https://raw.githubusercontent.com/jgrancell/malscan/master/malscan"</span>
                        </li>
                        <li>
                            <span class="file-block">wget -P "/usr/local/share/malscan/" "https://raw.githubusercontent.com/jgrancell/malscan/master/version.txt"</span>
                        </li>
                    </li>


                    <li>Create a malscan user and group, and assign any users that you would like to use malscan to the malscan group</li>
                    <li style="list-style-type: none">
                        <ul>
                            <li>
                                <span class="file-block">groupadd -r malscan</span>
                                <span class="file-block">useradd -r -g malscan -s /sbin/nologin -c "Malscan Service User" malscan</span>
                                <span class="file-block">usermod -a -G malscan your_user</span>
                            </li>
                        </ul>
                    </li>
                    <li>Make the binary executable with <span class="file-block">chmod +x /usr/local/bin/malscan</span></li>
                </ol>


            </div>

            malscan is now installed! Please see the <a href="#basic-usage">Basic Usage</a> section below to get started with malscan.

        </div>

    </div>


</div>

<hr class="block-divider">

<div>

	<h2 id="basic-usage">Basic Usage</h2>

	<div>

		A full list of Malscan commands can be found by using the <span class="file-block">malscan -h</span> command within the command line.
		
		<div class="code-block">
			<div>
				<span class="bash-root-prompt">[<span style="color: #ac2925">root</span>@<span style="color: #70DBDB">example</span>:<span style="color: #ac2925">~]#</span></span> malscan -h
			</div>
			<div>
				<span class="bash-blue">Malscan Version: {{ site.malscan-version }} | Signatures last updated: {{ "now" | date: "%c"}}</span><br>
				Usage: malscan [options] /path/to/scanned/directory
			</div>
			<div style="margin-left: 6%">
			   <span class="bash-green">-c [option]</span>  -- displays a current configuration option value<br>
			   <span class="bash-green">-c [option] [value]</span>  -- updates the value of a configuration option to a new value<br>
		       <span class="bash-green">-h</span>  -- display this help text<br>
		       <span class="bash-green">-l</span>  -- line scan mode<br>
		       <span class="bash-green">-m</span>  -- mime scan mode<br>
		       <span class="bash-green">-n</span>  -- send email notification.<br>
		       <span class="bash-green">-q</span>  -- quarantine any malicious files identified via the -s command<br>
		       <span class="bash-green">-r</span>  -- report a file to central malscan servers and add to signatures<br>
		       <span class="bash-green">-s</span>  -- basic malware scan<br>
		       <span class="bash-green">-t</span>  -- tripwire scan. identifies any files that are not in the whitelist, or have changed since whitelisting<br>
		       <span class="bash-green">-u</span>  -- updates the core application and all signature databases<br>
		       <span class="bash-green">-v</span>  -- display core application and signature database version information<br>
		       <span class="bash-green">-w</span>  -- adds specified file tree to whitelist.
			</div>
			<div>
				<span class="bash-root-prompt">[<span style="color: #ac2925">root</span>@<span style="color: #70DBDB">example</span>:<span style="color: #ac2925">~]#</span></span>
			</div>

		</div>

	</div>

	<div>

		<h4>Configuration</h4>

		Individual configuration options are accessible in two ways, through either the configuration file found at <span class="file-block">/usr/local/share/malscan/conf.malscan</span> or
		through the <span class="file-block"> malscan -c</span> command.

		Using the <span class="file-block">malscan -c</span> command allows you to pass no arguments, a single argument, or two arguments.

		<ul>
			
			<li><span class="file-block">malscan -c</span>: Show all Malscan configuration options and their values</li>
			<li><span class="file-block">malscan -c [option]</span>: Shows a single configuration option and its value</li>
			<li><span class="file-block">malscan -c [option] [value]</span>: Changes the specified configuration option to the new specified value</li>
			<li><span class="file-block">malscan -c [option] --description</span>: Provides a description about a Malscan configuration option</li>

		</ul>

	</div>

	<div>
		
	<h4>Your First Scan</h4>

		Scans are run using any of the scan-mode flags: <span class="file-block">-s</span>,<span class="file-block">-m</span>,<span class="file-block">-l</span>,<span class="file-block">-t</span>

		<ul>
			
			<li><span class="file-block">-s</span>: A basic malware scan, leveraging over 50,000 known malware signatures.</li>
			<li><span class="file-block">-m</span>: A mime-type scan, comparing the mime-type of a file against it's extension</li>
			<li><span class="file-block">-l</span>: A string length scan, checking for unusually long strings</li>
			<li><span class="file-block">-t</span>: A tripwire scan, comparing the current file tree against a previous whitelisting</li>
			<li style="list-style-type: none">
				<ul>
					<li>Note that the tripwire scan will return every single file not currently whitelisted as suspicious.</li>
					<li>Because of this, only run the <span class="file-block">-t</span> scan once you have set up a malscan whitelist.</li>
					<li>You can find more information about tripwire whitelisting in the <a href="/documentation/tripwire/">Tripwire Documentation</a></li>
				</ul>
			</li>

		</ul>

		<div>
			
			Scans are run by passing any combination of flags: <span class="file-block">malscan -ms /path/to/target/directory/for/scanning</span>.
		
		</div>

		<div style="margin-top: 10px">

			You can find more information about each scan-type within the <a href="/documentation/scan-modes/">Scan Modes Documentation</a>
		
		</div>

	</div>

</div>
